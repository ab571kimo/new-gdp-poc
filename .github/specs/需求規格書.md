# 需求規格書 GDP POC 系統

版本：003

## 1. 更新紀錄

| 序號 | 日期 | 頁面編號 | 功能編號 | 說明 |
| ---- | ---- | -------- | -------- | ---- |
| 001  | 2025-12-12 | GDP_UI_01<br>GDP_UI_02 | GDP_FC_001 | 初版需求規格書 |
| 002  | 2025-12-16 | GDP_UI_03 | GDP_FC_002<br>GDP_FC_003 | 新增選單管理頁面 |
| 003  | 2025-12-16 | GDP_UI_03 | GDP_FC_002<br>GDP_FC_003 | 功能編號調整，移除不呼叫後端的功能編號 |

## 2. 專案概述

2.1 專案目標

建立 GDP POC 系統，提供選單式導航的基礎框架，支援內嵌頁面與 URL 導頁功能。

2.2 專案描述

- 提供雙層式選單結構（選單 > 頁面）
- 支援動態讀取站台選單結構
- 提供系統首頁與歡迎標語
- 支援內嵌頁面與 URL 導頁兩種頁面顯示模式

## 3. 使用者角色

- 一般使用者：可瀏覽系統選單並進入各功能頁面
- 管理者：可管理系統選單結構，包含選單與頁面的新增、編輯、排序

## 4. 功能需求

### 4.1 GDP_UI_01 - 系統首頁

頁面描述：系統初始進入頁面，包含左側選單、上方 Header 與右側顯示區塊的整體佈局。

#### 4.1.1 所含功能編號

**GDP_FC_001 - 讀取選單結構**

功能描述：
- 系統載入時自動讀取站台選單結構
- 選單結構為雙層式（選單 > 頁面）
- 若讀取失敗或無選單結構，左側選單區域顯示為空白
- 選單結構需包含 iframeId 或 pageUrl 參數，用於判斷頁面顯示模式（內嵌或 URL 導頁）
- 選單結構需包含 menuNo 和 pageNo 參數，用於控制選單群組和頁面的排序順序

UI 互動：
- 初始狀態：系統載入時自動執行
- 成功狀態：左側顯示雙層選單結構
- 失敗狀態：左側選單區域保持空白
- 查無資料：左側選單區域保持空白

異常處理：
- 網路連線異常：選單區域保持空白，不顯示錯誤訊息
- 選單結構格式錯誤：選單區域保持空白
- 後端服務無回應：選單區域保持空白

### 4.2 GDP_UI_02 - 內容顯示頁面

頁面描述：使用者點選選單項目後，在右側區域顯示對應的頁面內容。

#### 4.2.1 所含功能編號

無需呼叫後端的功能，此頁面僅負責前端內容切換與顯示。

### 4.3 GDP_UI_03 - 選單管理頁面

頁面描述：提供管理者管理系統選單結構的頁面，可編輯選單與頁面的相關資訊。頁面 URL 為 admin/menu-management。

#### 4.3.1 所含功能編號

**GDP_FC_002 - 讀取選單管理資料**

功能描述：
- 頁面載入時自動讀取完整的選單與頁面結構資料
- 包含選單與其底下的所有頁面資料
- 資料包含選單名稱、選單排序、頁面名稱、DASHBOARDID、URL、GENIEID、頁面排序
- 若讀取失敗，顯示錯誤訊息
- 若查無資料，顯示空白列表並提示無任何選單資料

UI 互動：
- 初始狀態：頁面載入時自動執行
- 成功狀態：顯示選單與頁面的樹狀結構列表
- 失敗狀態：顯示錯誤訊息「讀取選單資料失敗，請稍後再試」
- 查無資料：顯示「目前無任何選單資料」

異常處理：
- 網路連線異常：顯示錯誤訊息「網路連線異常，請檢查網路後重試」
- 後端服務無回應：顯示錯誤訊息「系統服務無回應，請聯繫系統管理員」
- 資料格式錯誤：顯示錯誤訊息「資料格式錯誤，請聯繫系統管理員」

**GDP_FC_003 - 管理與確定選單結構變更**

功能描述：
- 管理者可在前端編輯選單名稱、調整選單順序
- 管理者可在前端編輯頁面資訊（頁面名稱、DASHBOARDID、URL、GENIEID）及調整頁面順序
- 編輯時進行即時驗證，但不呼叫後端 API
- 點選「確定全部變更」後，統一確定所有編輯後的選單與頁面資料
- 確定前進行完整資料驗證
- 驗證通過後批次送出至後端
- 確定成功後顯示成功訊息並重新讀取選單資料
- 確定失敗顯示錯誤訊息

前端編輯操作（不呼叫後端）：
- 編輯選單名稱：點選編輯按鈕進入編輯模式，欄位變成輸入框，即時驗證長度（1-50 字元）
- 編輯頁面資訊：點選編輯按鈕進入編輯模式，所有欄位變成輸入框，即時驗證長度限制
- 調整順序：使用上下移動按鈕調整順序，系統自動依序編號，不顯示排序數字
- 點選確定：更新前端畫面顯示，顯示「已更新」提示
- 點選取消：放棄編輯並關閉編輯模式

UI 互動：
- 編輯操作：在前端即時更新畫面，顯示「已更新」提示
- 點選「確定全部變更」按鈕：觸發完整資料驗證與批次送出流程
- 驗證中：顯示載入狀態
- 驗證成功：批次送出所有資料至後端
- 確定成功：顯示成功訊息「變更已確定」並重新讀取資料
- 驗證或確定失敗：顯示對應錯誤訊息

邊界值考量：
- 選單名稱：最小 1 個字元，最大 50 個字元，不可為空白
- 頁面名稱：最小 1 個字元，最大 50 個字元，不可為空白
- DASHBOARDID：最小 0 個字元，最大 200 個字元，可為空白
- URL：最小 0 個字元，最大 200 個字元，可為空白
- GENIEID：最小 0 個字元，最大 200 個字元，可為空白

異常處理：
- 選單名稱為空：顯示錯誤訊息「選單名稱不可為空白」
- 選單名稱超過長度限制：顯示錯誤訊息「選單名稱長度不可超過 50 個字元」
- 頁面名稱為空：顯示錯誤訊息「頁面名稱不可為空白」
- 頁面名稱超過長度限制：顯示錯誤訊息「頁面名稱長度不可超過 50 個字元」
- DASHBOARDID 超過長度限制：顯示錯誤訊息「DASHBOARDID 長度不可超過 200 個字元」
- URL 超過長度限制：顯示錯誤訊息「URL 長度不可超過 200 個字元」
- GENIEID 超過長度限制：顯示錯誤訊息「GENIEID 長度不可超過 200 個字元」
- 資料驗證失敗：顯示具體驗證錯誤訊息
- 網路連線異常：顯示錯誤訊息「網路連線異常，請檢查網路後重試」
- 後端服務無回應：顯示錯誤訊息「系統服務無回應，請聯繫系統管理員」
- 確定失敗：顯示錯誤訊息「確定失敗，請稍後再試」

## 5. 站台共用需求

### 5.1 Header 區域
- 位置：系統上方
- 左側顯示文字：「GDP POC 系統」
- Header 左側文字可點選，點選後回到首頁（右側顯示歡迎標語）
- Header 無其他按鈕或功能

### 5.2 選單區域
- 位置：系統左側
- 選單結構：雙層式（選單 > 頁面）
- 選單項目可點選，點選後右側顯示對應頁面
- 初始未讀取到選單時，區域保持空白

### 5.3 顯示區域
- 位置：系統右側
- 初始顯示：歡迎標語
- 頁面顯示判斷邏輯：
  - 有 iframeId：使用內嵌模式，內容直接嵌入顯示區域
  - 有 pageUrl（無 iframeId）：使用 URL 導頁模式進行頁面導向
  - iframeId 與 pageUrl 同時存在：優先使用 iframeId（內嵌模式）
  - 兩者皆無：該選單項目不可點選
- 頁面切換：根據使用者點選的選單項目動態切換內容

### 5.4 介面配色
- 深色底白字設計，提升可讀性
