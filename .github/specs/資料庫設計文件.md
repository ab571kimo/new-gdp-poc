# 資料庫設計文件 GDP POC 系統

版本：002

## 1. 更新紀錄

| 日期       | 資料表名稱                                      | 說明                                           |
| ---------- | ----------------------------------------------- | ---------------------------------------------- |
| 2025-12-12 | gdp_menu_data<br>gdp_page_data | 依據需求規格書[001]進行建立，新增選單與頁面資料表 |
| 2025-12-17 | gdp_user_page | 依據 GDP_API_0001 權限控制需求，新增使用者頁面授權資料表 |

## 2. 資料庫位置

dev_temp.data_engineer

## 3. 資料表清單資訊

### 3.1 gdp_menu_data

中文名稱：選單資料表  
PK：menu_id

| 欄位名稱  | 型態   | NULL | 說明         |
| --------- | ------ | ---- | ------------ |
| menu_id   | STRING | NO   | 選單編號 (PK) |
| menu_name | STRING | YES  | 選單名稱     |
| menu_no   | INT    | YES  | 選單排序編號 |

**說明：**
- menu_id：選單的唯一識別碼，作為主鍵
- menu_name：選單顯示名稱，顯示於左側選單區域
- menu_no：控制選單群組的顯示順序，數字越小越前面

### 3.2 gdp_page_data

中文名稱：頁面資料表  
PK：page_id

| 欄位名稱  | 型態   | NULL | 說明             |
| --------- | ------ | ---- | ---------------- |
| page_id   | STRING | NO   | 頁面編號 (PK)     |
| page_name | STRING | YES  | 頁面名稱         |
| page_no   | INT    | YES  | 頁面排序編號     |
| menu_id   | STRING | YES  | 選單編號 (FK)     |
| dashboard_id | STRING | YES  | 內嵌頁面識別碼   |
| url       | STRING | YES  | 頁面 URL         |
| genie_id  | STRING | YES  | Genie 識別碼     |

**說明：**
- page_id：頁面的唯一識別碼，作為主鍵
- page_name：頁面顯示名稱，顯示於選單項目中
- page_no：控制同一選單群組內頁面的顯示順序，數字越小越前面
- menu_id：關聯的選單編號，對應 gdp_menu_data.menu_id
- dashboard_id：用於內嵌模式的頁面識別碼
- url：用於 URL 導頁模式的頁面網址
- genie_id：Genie 相關識別碼（保留欄位）

**頁面顯示模式判斷：**
- 若 dashboard_id 有值，使用內嵌模式
- 若 url 有值（且 dashboard_id 為空），使用 URL 導頁模式
- 若兩者皆有值，優先使用 dashboard_id（內嵌模式）
- 若兩者皆無值，該頁面項目不可點選

### 3.3 gdp_user_page

中文名稱：使用者頁面授權資料表  
PK：(user_id, page_id)

| 欄位名稱  | 型態   | NULL | 說明             |
| --------- | ------ | ---- | ---------------- |
| user_id   | VARCHAR(100) | NO   | 使用者編號 (PK)   |
| page_id   | VARCHAR(100) | NO   | 頁面編號 (PK, FK) |

**說明：**
- user_id：使用者的唯一識別碼，作為組合主鍵之一
- page_id：頁面的唯一識別碼，作為組合主鍵之一，對應 gdp_page_data.page_id
- 此資料表用於控制使用者對頁面的存取權限
- 只有在此表中有對應記錄的 user_id 和 page_id 組合，該使用者才能看到該頁面
- 若使用者對某選單下的所有頁面都沒有權限，該選單不顯示
